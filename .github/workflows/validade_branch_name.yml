name: Validar nome da branch

on:
  pull_request:
    branches:
      - '**'

jobs:
  check-branch-name:
    runs-on: ubuntu-latest

    steps:
      - name: Verificar nome da Branch
        run: |
          BRANCH_NAME="${{ github.head_ref }}"
          echo "Nome da branch: $BRANCH_NAME"
          
          PATTERN="^(feature|bugfix|release|hotfix|docs|dev)/.+$"
          
          if [[ ! "$BRANCH_NAME" =~ $PATTERN ]]; then
            echo "üö® Nome de branch inv√°lido: $BRANCH_NAME. O nome da branch deve seguir o padr√£o: [tipo]/[finalidade]/[nome-da-branch], onde [tipo] √© 'feature', 'bugfix', 'release', 'hotfix', 'docs' ou 'dev'."
            exit 1
          fi

      - name: Conclus√£o da Verifica√ß√£o
        if: success()
        run: |
          echo "Nome da branch v√°lido: $BRANCH_NAME."
